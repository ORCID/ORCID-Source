/*
 * angular-ui-bootstrap
 * http://angular-ui.github.io/bootstrap/

 * Version: 0.13.4 - 2015-10-17
 * License: MIT
 */
angular.module("ui.bootstrap",["ui.bootstrap.typeahead","ui.bootstrap.position"]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position"]).factory("typeaheadParser",["$parse",function(e){var t=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(a){var n=a.match(t);if(!n)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+a+'".');return{itemName:n[3],source:e(n[4]),viewMapper:e(n[2]||n[1]),modelMapper:e(n[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$window","$rootScope","$position","typeaheadParser",function(e,t,a,n,i,o,r,p,c){var s=[9,13,27,38,40],l=200;return{require:["ngModel","^?ngModelOptions"],link:function(u,d,h,f){function m(){B.moveInProgress||(B.moveInProgress=!0,B.$digest()),D&&n.cancel(D),D=n(function(){B.matches.length&&v(),B.moveInProgress=!1,B.$digest()},l)}function v(){B.position=O?p.offset(d):p.position(d),B.position.top+=d.prop("offsetHeight")}var g=f[0],$=f[1],y=u.$eval(h.typeaheadMinLength);y||0===y||(y=1);var w,b,x=u.$eval(h.typeaheadWaitMs)||0,I=u.$eval(h.typeaheadEditable)!==!1,M=t(h.typeaheadLoading).assign||angular.noop,S=t(h.typeaheadOnSelect),P=angular.isDefined(h.typeaheadSelectOnBlur)?u.$eval(h.typeaheadSelectOnBlur):!1,U=t(h.typeaheadNoResults).assign||angular.noop,E=h.typeaheadInputFormatter?t(h.typeaheadInputFormatter):void 0,O=h.typeaheadAppendToBody?u.$eval(h.typeaheadAppendToBody):!1,T=u.$eval(h.typeaheadFocusFirst)!==!1,k=h.typeaheadSelectOnExact?u.$eval(h.typeaheadSelectOnExact):!1,q=t(h.ngModel),A=t(h.ngModel+"($$$p)"),V=function(e,t){return angular.isFunction(q(u))&&$&&$.$options&&$.$options.getterSetter?A(e,{$$$p:t}):q.assign(e,t)},_=c.parse(h.typeahead),B=u.$new(),C=u.$on("$destroy",function(){B.$destroy()});B.$on("$destroy",C);var F="typeahead-"+B.$id+"-"+Math.floor(1e4*Math.random());d.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":F});var H=angular.element("<div typeahead-popup></div>");H.attr({id:F,matches:"matches",active:"activeIdx",select:"select(activeIdx)","move-in-progress":"moveInProgress",query:"query",position:"position"}),angular.isDefined(h.typeaheadTemplateUrl)&&H.attr("template-url",h.typeaheadTemplateUrl),angular.isDefined(h.typeaheadPopupTemplateUrl)&&H.attr("popup-template-url",h.typeaheadPopupTemplateUrl);var N=function(){B.matches=[],B.activeIdx=-1,d.attr("aria-expanded",!1)},L=function(e){return F+"-option-"+e};B.$watch("activeIdx",function(e){0>e?d.removeAttr("aria-activedescendant"):d.attr("aria-activedescendant",L(e))});var R=function(e,t){return B.matches.length>t&&e?e.toUpperCase()===B.matches[t].label.toUpperCase():!1},W=function(e){var t={$viewValue:e};M(u,!0),U(u,!1),a.when(_.source(u,t)).then(function(a){var n=e===g.$viewValue;if(n&&w)if(a&&a.length>0){B.activeIdx=T?0:-1,U(u,!1),B.matches.length=0;for(var i=0;i<a.length;i++)t[_.itemName]=a[i],B.matches.push({id:L(i),label:_.viewMapper(B,t),model:a[i]});B.query=e,v(),d.attr("aria-expanded",!0),k&&1===B.matches.length&&R(e,0)&&B.select(0)}else N(),U(u,!0);n&&M(u,!1)},function(){N(),M(u,!1),U(u,!0)})};O&&(angular.element(o).bind("resize",m),i.find("body").bind("scroll",m));var D;B.moveInProgress=!1,N(),B.query=void 0;var z,j=function(e){z=n(function(){W(e)},x)},X=function(){z&&n.cancel(z)};g.$parsers.unshift(function(e){return w=!0,0===y||e&&e.length>=y?x>0?(X(),j(e)):W(e):(M(u,!1),X(),N()),I?e:e?void g.$setValidity("editable",!1):(g.$setValidity("editable",!0),null)}),g.$formatters.push(function(e){var t,a,n={};return I||g.$setValidity("editable",!0),E?(n.$model=e,E(u,n)):(n[_.itemName]=e,t=_.viewMapper(u,n),n[_.itemName]=void 0,a=_.viewMapper(u,n),t!==a?t:e)}),B.select=function(e){var t,a,i={};b=!0,i[_.itemName]=a=B.matches[e].model,t=_.modelMapper(u,i),V(u,t),g.$setValidity("editable",!0),g.$setValidity("parse",!0),S(u,{$item:a,$model:t,$label:_.viewMapper(u,i)}),N(),B.$eval(h.typeaheadFocusOnSelect)!==!1&&n(function(){d[0].focus()},0,!1)},d.bind("keydown",function(e){if(0!==B.matches.length&&-1!==s.indexOf(e.which)){if(-1===B.activeIdx&&(9===e.which||13===e.which))return N(),void B.$digest();e.preventDefault(),40===e.which?(B.activeIdx=(B.activeIdx+1)%B.matches.length,B.$digest()):38===e.which?(B.activeIdx=(B.activeIdx>0?B.activeIdx:B.matches.length)-1,B.$digest()):13===e.which||9===e.which?B.$apply(function(){B.select(B.activeIdx)}):27===e.which&&(e.stopPropagation(),N(),B.$digest())}}),d.bind("blur",function(){P&&B.matches.length&&-1!==B.activeIdx&&!b&&(b=!0,B.$apply(function(){B.select(B.activeIdx)})),w=!1,b=!1});var Y=function(e){d[0]!==e.target&&3!==e.which&&0!==B.matches.length&&(N(),r.$$phase||B.$digest())};i.bind("click",Y),u.$on("$destroy",function(){i.unbind("click",Y),O&&G.remove(),H.remove()});var G=e(H)(B);O?i.find("body").append(G):d.after(G)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&"},replace:!0,templateUrl:function(e,t){return t.popupTemplateUrl||"template/typeahead/typeahead-popup.html"},link:function(e,t,a){e.templateUrl=a.templateUrl,e.isOpen=function(){return e.matches.length>0},e.isActive=function(t){return e.active==t},e.selectActive=function(t){e.active=t},e.selectMatch=function(t){e.select({activeIdx:t})}}}}).directive("typeaheadMatch",["$templateRequest","$compile","$parse",function(e,t,a){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(n,i,o){var r=a(o.templateUrl)(n.$parent)||"template/typeahead/typeahead-match.html";e(r).then(function(e){t(e.trim())(n,function(e){i.replaceWith(e)})})}}}]).filter("typeaheadHighlight",["$sce","$injector","$log",function(e,t,a){function n(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function i(e){return/<.*>/g.test(e)}var o;return o=t.has("$sanitize"),function(t,r){return!o&&i(t)&&a.warn("Unsafe use of typeahead please use ngSanitize"),t=r?(""+t).replace(new RegExp(n(r),"gi"),"<strong>$&</strong>"):t,o||(t=e.trustAsHtml(t)),t}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(e,t){function a(e,a){return e.currentStyle?e.currentStyle[a]:t.getComputedStyle?t.getComputedStyle(e)[a]:e.style[a]}function n(e){return"static"===(a(e,"position")||"static")}var i=function(t){for(var a=e[0],i=t.offsetParent||a;i&&i!==a&&n(i);)i=i.offsetParent;return i||a};return{position:function(t){var a=this.offset(t),n={top:0,left:0},o=i(t[0]);o!=e[0]&&(n=this.offset(angular.element(o)),n.top+=o.clientTop-o.scrollTop,n.left+=o.clientLeft-o.scrollLeft);var r=t[0].getBoundingClientRect();return{width:r.width||t.prop("offsetWidth"),height:r.height||t.prop("offsetHeight"),top:a.top-n.top,left:a.left-n.left}},offset:function(a){var n=a[0].getBoundingClientRect();return{width:n.width||a.prop("offsetWidth"),height:n.height||a.prop("offsetHeight"),top:n.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:n.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}},positionElements:function(e,t,a,n){var i,o,r,p,c=a.split("-"),s=c[0],l=c[1]||"center";i=n?this.offset(e):this.position(e),o=t.prop("offsetWidth"),r=t.prop("offsetHeight");var u={center:function(){return i.left+i.width/2-o/2},left:function(){return i.left},right:function(){return i.left+i.width}},d={center:function(){return i.top+i.height/2-r/2},top:function(){return i.top},bottom:function(){return i.top+i.height}};switch(s){case"right":p={top:d[l](),left:u[s]()};break;case"left":p={top:d[l](),left:i.left-o};break;case"bottom":p={top:d[s](),left:u[l]()};break;default:p={top:i.top-r,left:u[l]()}}return p}}}]);